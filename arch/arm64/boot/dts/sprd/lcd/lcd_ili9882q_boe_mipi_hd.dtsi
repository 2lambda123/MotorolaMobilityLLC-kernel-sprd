
/*
 * ili9882q  LCD config dtsi file for spreadtrum
 *
 * Copyright (C) 2022, Spreadtrum Communications Inc.
 *
 * SPDX-License-Identifier: (GPL-2.0+ OR MIT)
 */

/ {
	fragment {
		target-path = "/";
		__overlay__ {
			lcds {
				lcd_ili9882q_boe_mipi_hd: lcd_ili9882q_boe_mipi_hd {

					sprd,dsi-work-mode = <1>; /* video burst mode*/
					sprd,dsi-lane-number = <4>;
					sprd,dsi-color-format = "rgb888";

					sprd,phy-bit-clock = <700000>;	/* kbps */
					sprd,phy-escape-clock = <20000>;/* kHz */

					sprd,power-gpio-delay = <20>;/* ms */

					sprd,width-mm = <68>;
					sprd,height-mm = <152>;

					sprd,esd-check-enable = <0>;
					sprd,esd-check-mode = <0>;
					sprd,esd-check-period = <2000>;
					sprd,esd-check-regs = <0xA>;
					sprd,esd-return-code = <0x9c>;

					sprd,reset-on-sequence = <1 5>, <0 5>, <1 20>;
					sprd,reset-off-sequence = <0 5>;

					sprd,initial-command = [
						//GIP Setting
						39 00 00 04 FF 98 82 01
						39 00 00 02 00 4A
						39 00 00 02 01 34
						39 00 00 02 02 35
						39 00 00 02 03 5E
						39 00 00 02 04 CF
						39 00 00 02 05 34
						39 00 00 02 06 35	//STV0=4H 20201117
						39 00 00 02 07 5E
						39 00 00 02 08 86
						39 00 00 02 09 01
						39 00 00 02 0a 73
						39 00 00 02 0b 00
						39 00 00 02 0c 33	//CLK duty   modify for sensor mura by shawn_20200512
						39 00 00 02 0d 33	//CLK duty   modify for sensor mura by shawn_20200512
						39 00 00 02 0e 04
						39 00 00 02 0f 04
						39 00 00 02 28 48
						39 00 00 02 29 86
						39 00 00 02 2A 4B	//4E         20200219
						39 00 00 02 2B 85	//86         20200220

						//FW_R
						39 00 00 02 31 07	// Hi-Z
						39 00 00 02 32 00	// VSD
						39 00 00 02 33 0C	// STV0
						39 00 00 02 34 2A	// VGL
						39 00 00 02 35 09	// STV2
						39 00 00 02 36 0B	// STV4
						39 00 00 02 37 01	// VDS
						39 00 00 02 38 06	// GCH
						39 00 00 02 39 15	// CLK2
						39 00 00 02 3A 17	// CLK4
						39 00 00 02 3B 11	// CLK6
						39 00 00 02 3C 13	// CLK8
						39 00 00 02 3D 07	// Hi-Z
						39 00 00 02 3E 07	// Hi-Z
						39 00 00 02 3F 07	// Hi-Z	
						39 00 00 02 40 07	// Hi-Z
						39 00 00 02 41 07	// Hi-Z
						39 00 00 02 42 07	// Hi-Z
						39 00 00 02 43 07	// Hi-Z
						39 00 00 02 44 07	// Hi-Z
						39 00 00 02 45 07	// Hi-Z
						39 00 00 02 46 07	// Hi-Z
						//FW_L
						39 00 00 02 47 07	// Hi-Z
						39 00 00 02 48 00	// VSD
						39 00 00 02 49 0C	// STV0
						39 00 00 02 4A 2A	// VGL
						39 00 00 02 4B 08	// STV1
						39 00 00 02 4C 0A	// STV3
						39 00 00 02 4D 01	// VDS
						39 00 00 02 4E 06	// GCH
						39 00 00 02 4F 14	// CLK1
						39 00 00 02 50 16	// CLK3
						39 00 00 02 51 10	// CLK5
						39 00 00 02 52 12	// CLK7
						39 00 00 02 53 07	// Hi-Z
						39 00 00 02 54 07	// Hi-Z
						39 00 00 02 55 07	// Hi-Z
						39 00 00 02 56 07	// Hi-Z
						39 00 00 02 57 02	// Hi-Z
						39 00 00 02 58 07	// Hi-Z
						39 00 00 02 59 07	// Hi-Z
						39 00 00 02 5A 07	// Hi-Z
						39 00 00 02 5B 07	// Hi-Z
						39 00 00 02 5C 07	// Hi-Z
						//BW_R
						39 00 00 02 61 07	// Hi-Z
						39 00 00 02 62 00	// VSD
						39 00 00 02 63 0C	// STV0
						39 00 00 02 64 2A	// VGL
						39 00 00 02 65 0A	// STV2
						39 00 00 02 66 08	// STV4
						39 00 00 02 67 01	// VDS
						39 00 00 02 68 06	// GCH
						39 00 00 02 69 12	// CLK2
						39 00 00 02 6A 10	// CLK4
						39 00 00 02 6B 16	// CLK6
						39 00 00 02 6C 14	// CLK8
						39 00 00 02 6D 07	// Hi-Z
						39 00 00 02 6E 07	// Hi-Z
						39 00 00 02 6F 07	// Hi-Z
						39 00 00 02 70 07	// Hi-Z
						39 00 00 02 71 07	// Hi-Z
						39 00 00 02 72 07	// Hi-Z
						39 00 00 02 73 07	// Hi-Z
						39 00 00 02 74 07	// Hi-Z
						39 00 00 02 75 07	// Hi-Z
						39 00 00 02 76 07	// Hi-Z
						//BW_L
						39 00 00 02 77 07	// Hi-Z
						39 00 00 02 78 00	// VSD
						39 00 00 02 79 0C	// STV0
						39 00 00 02 7A 2A	// VGL
						39 00 00 02 7B 0B	// STV1
						39 00 00 02 7C 09	// STV3
						39 00 00 02 7D 01	// VDS
						39 00 00 02 7E 06	// GCH
						39 00 00 02 7F 13	// CLK1
						39 00 00 02 80 11	// CLK3
						39 00 00 02 81 17	// CLK5
						39 00 00 02 82 15	// CLK7
						39 00 00 02 83 07	// Hi-Z
						39 00 00 02 84 07	// Hi-Z
						39 00 00 02 85 07	// Hi-Z
						39 00 00 02 86 07	// Hi-Z
						39 00 00 02 87 07	// Hi-Z
						39 00 00 02 88 07	// Hi-Z
						39 00 00 02 89 07	// Hi-Z
						39 00 00 02 8A 07	// Hi-Z
						39 00 00 02 8B 07	// Hi-Z
						39 00 00 02 8C 07	// Hi-Z

						39 00 00 02 B0 33
						39 00 00 02 B1 33
						39 00 00 02 B2 00
						39 00 00 02 d0 01
						39 00 00 02 d1 00
						39 00 00 02 E2 00
						39 00 00 02 E6 22
						39 00 00 02 E7 54
						39 00 00 02 ED 86	//STV0

						// RTN. Internal VBP, Internal VFP
						39 00 00 04 FF 98 82 02
						39 00 00 02 F1 1C	// Tcon ESD option
						39 00 00 02 4B 5A	// line_chopper
						39 00 00 02 50 CA	// line_chopper
						39 00 00 02 51 00	// line_chopper
						39 00 00 02 06 8E	// Internal Line Time (RTN)
						39 00 00 02 0B A0	// Internal VFP[9]
						39 00 00 02 0C 00	// Internal VFP[8]
						39 00 00 02 0D 12	// Internal VBP ( <= 255 )
						39 00 00 02 0E EA	// Internal VFP  ( <= 1023 )
						39 00 00 02 4E 11	// SRC BIAS
						39 00 00 02 F2 4A	// Reset Option
						39 00 00 02 51 10	// for hopping BG offset (Capless mode only)
						39 00 00 02 40 45	//SDT reduce
						39 00 00 02 4D CF	//PS enable
						39 00 00 02 49 02
						39 00 00 02 47 12
						39 00 00 02 43 02

						// Power Setting
						39 00 00 04 FF 98 82 05
						39 00 00 02 03 00	// Vcom
						39 00 00 02 04 D7	// Vcom
						39 00 00 02 63 9C	// GVDDN = -5.6V		20220817
						39 00 00 02 64 9C	// GVDDP = 5.6V			20220817
						39 00 00 02 68 8D	// VGHO = 14V				20220817
						39 00 00 02 69 93	// VGH = 15V				20220817
						39 00 00 02 6A C9	// VGLO = -14V
						39 00 00 02 6B BB	// VGL = -15V
						39 00 00 02 85 37	// HW RESET option

						// Resolution
						39 00 00 04 FF 98 82 06
						39 00 00 02 D9 1F	// 4Lane
						39 00 00 02 C0 40	// NL = 1600
						39 00 00 02 C1 16	// NL = 1600
						39 00 00 02 80 08	// mipi_cmd_toggle_en

						//PWM HZ 19.5K
						39 00 00 04 FF 98 82 06
						39 00 00 02 06 A4	// cabc_clk_sel_pll
						39 00 00 04 FF 98 82 03
						39 00 00 02 83 20
						39 00 00 02 84 00	//20 = 12bit 50 = 8bit

						// Gamma Register 
						39 00 00 04 FF 98 82 08
						39 00 00 1C E0 00 24 52 76 AA 54 DA 00 31 5A A5 9B D0 01 30 AA 5F 99 BD E9 FF 0E 3A 73 9A 03 EC
						39 00 00 1C E1 00 24 52 76 AA 54 DA 00 31 5A A5 9B D0 01 30 AA 5F 99 BD E9 FF 0E 3A 73 9A 03 EC

						// OSC Auto Trim Setting
						39 00 00 04 FF 98 82 0B
						39 00 00 02 9A 88
						39 00 00 02 9B FF
						39 00 00 02 9C 06
						39 00 00 02 9D 06
						39 00 00 02 9E E1
						39 00 00 02 9F E1
						39 00 00 02 AA 22
						39 00 00 02 AB E0	// AutoTrimType
						39 00 00 02 AC 7F	// trim_osc_max
						39 00 00 02 AD 3F	// trim_osc_min

						// TP Setting
						39 00 00 04 FF 98 82 0E
						39 00 00 02 11 50	//TSVD Rise Poisition
						39 00 00 02 12 08	// LV mode TSHD Rise position
						39 00 00 02 13 10	// LV mode TSHD Rise position
						39 00 00 02 00 A0	// LV mode

						39 00 00 04 FF 98 82 00
						39 00 00 02 53 24
						39 00 00 03 51 0C CC
						39 00 00 02 35 00
						05 78 00 01 11

						39 00 00 04 FF 98 82 06
						39 00 00 02 06 A4

						39 00 00 04 FF 98 82 0B
						39 00 00 02 94 88
						39 00 00 02 95 23
						39 00 00 02 96 06
						39 00 00 02 97 06
						39 00 00 02 98 CB
						39 00 00 02 99 CB
						39 00 00 02 9A 88
						39 00 00 02 9B E7
						39 00 00 02 9C 06
						39 00 00 02 9D 06
						39 00 00 02 9E DE
						39 00 00 02 9F DE
						39 00 00 02 AA 22

						39 00 00 04 FF 98 82 02
						39 00 00 02 06 8D
						39 00 00 02 0B A0
						39 00 00 02 0C 00
						39 00 00 02 0D 22
						39 00 00 02 0E EE

						39 00 00 04 FF 98 82 00
						05 14 00 01 29
						];

					sprd,sleep-in-command = [
						39 0A 00 01 28
						39 78 00 01 10
						];

					sprd,sleep-out-command = [
						39 78 00 01 11
						39 14 00 01 29
						];  

					oled-backlight {
						default-brightness = <900>;
						sprd,max-level = <4095>;
						brightness-levels = [
						39 00 00 03 51 0C CC
						];
					};

					display-timings {
						native-mode = <&ili9882q_boe_timing0>;

						ili9882q_boe_timing0: timing0 {
							clock-frequency = <96000000>;
							hactive = <720>;
							vactive = <1600>;
							hback-porch = <90>;
							hfront-porch = <32>;
							vback-porch = <26>;
							vfront-porch = <238>;
							hsync-len = <12>;
							vsync-len = <8>;
						};
					};
				};
			};
		};
	};
};
